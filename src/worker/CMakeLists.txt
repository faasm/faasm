include_directories(
        ${FAASM_INCLUDE_DIR}/worker
)

set(LIB_HEADERS
        ${FAASM_INCLUDE_DIR}/worker/WorkerHttpMixin.h
        ${FAASM_INCLUDE_DIR}/worker/WorkerMain.h
        ${FAASM_INCLUDE_DIR}/worker/WorkerThread.h
        ${FAASM_INCLUDE_DIR}/worker/WorkerThreadPool.h
        )

set(LIB_FILES
        WorkerHttpMixin.cpp
        WorkerMain.cpp
        WorkerThread.cpp
        WorkerThreadPool.cpp
        ${LIB_HEADERS}
        )

faasm_private_lib(worker_lib "${LIB_FILES}")
target_link_libraries(worker_lib wasm zygote scheduler system libWAVM)

add_executable(worker worker_main.cpp)
target_link_libraries(worker worker_lib)
